<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Ticket Venta</title>
    <style>
        body {
            font-family: monospace;
            width: 300px;
            margin: auto;
        }
        h2, p {
            text-align: center;
            margin: 5px 0;
        }
        table {
            width: 100%;
            font-size: 12px;
        }
        .total {
            font-weight: bold;
            font-size: 16px;
            text-align: right;
            margin-top: 10px;
        }
        .linea {
            border-top: 1px dashed black;
            margin: 8px 0;
        }
        button {
            margin-top: 10px;
            width: 100%;
            padding: 10px;
        }
        @media print {
            button { display: none; }
        }
    </style>
</head>
<body>

<h2>{{ empresa.nombre }}</h2>

{% if empresa.rnc %}
<p>RNC: {{ empresa.rnc }}</p>
{% endif %}

{% if empresa.telefono %}
<p>Tel: {{ empresa.telefono }}</p>
{% endif %}

{% if empresa.direccion %}
<p>{{ empresa.direccion }}</p>
{% endif %}
<div class="linea"></div>

 {% if venta.orden %}
    <p><strong>Pedido #{{ venta.orden.id }}</strong></p>
{% elif venta.reserva %}
    <p><strong>Reserva #{{ venta.reserva.id }}</strong></p>
{% else %}
    <p><strong>Venta directa</strong></p>
{% endif %}

    <p>{{ venta.fecha|date:"d/m/Y H:i" }}</p>

  <div class="linea"></div>

<table>
    <thead>
        <tr>
            <th style="text-align:left;">Cant</th>
            <th style="text-align:left;">Desc</th>
            <th style="text-align:right;">Imp</th>
        </tr>
    </thead>
    <tbody>
       {% if venta.orden %}

    {% for item in venta.orden.items.all %}
    <tr>
        <td>{{ item.cantidad }}</td>
        <td>
            {{ item.producto.nombre }}<br>
            <small>${{ item.precio }} c/u</small>
        </td>
        <td style="text-align:right;">
            ${{ item.total_linea }}
        </td>
    </tr>
    {% endfor %}

{% elif venta.reserva %}

    <tr>
        <td>1</td>
        <td>
            Reserva<br>
            <small>
                {{ venta.reserva.fecha|date:"d/m/Y" }}
                {{ venta.reserva.hora }}
            </small>
        </td>
        <td style="text-align:right;">
            ${{ venta.total }}
        </td>
    </tr>

{% else %}

    <tr>
        <td>1</td>
        <td>Venta directa</td>
        <td style="text-align:right;">
            ${{ venta.total }}
        </td>
    </tr>

{% endif %}

    </tbody>
</table>

<div class="linea"></div>

<table>
    <tr>
        <td>Subtotal</td>
        <td style="text-align:right;">${{ venta.subtotal }}</td>
    </tr>
    <tr>
        <td>Impuestos</td>
        <td style="text-align:right;">${{ venta.impuestos }}</td>
    </tr>
</table>

<div class="linea"></div>

<p class="total">TOTAL: ${{ venta.total }}</p>

<div class="linea"></div>

<p><strong>M√©todo(s) de pago:</strong></p>
{% for pago in venta.pagos.all %}
<p>{{ pago.get_metodo_display }} - ${{ pago.monto }}</p>
{% endfor %}



    <button onclick="window.print()">üñ®Ô∏è Imprimir</button>

</body>
</html>